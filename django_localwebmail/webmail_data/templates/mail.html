{% extends "base.html" %}
{% block content %}

<div class="mail" >
<table border="0" style="width: 100%; background-color: #fff;">
	<tr>
	<td colspan="4">
	<form action="/compose/new/">
		<input type="submit" value="Compose">
	</form>
	</td>
	</tr>

	<tr class="mail_headings" style="font-weight: bold;">
	<td style="width: 1%;"><!-- select all checkbox --></td>
	<td style="border-bottom: 1px solid black;">Subject</td>
	<td style="width: 20%; border-bottom: 1px solid black;">From</td>
	<td style="width: 20%; border-bottom: 1px solid black;">Date</td>
	</tr>

	{% for number, message_headers, message, raw_message in mail %}
	<tr style="background-color: {% cycle '#cef' '#cdf' %};">
	<td>
	<form>
		<input class="message_checkbox" id="checkbox_{{number}}" type="checkbox" name="{{ number }}" value="{{ number }}" onclick="unselect_variety({{element.1}})" />
	</form>
	</td>
	<td onclick="toggle_message('{{number}}')" style="color: blue; text-decoration: underline;">{{ message_headers.Subject }}</td>
	<td onclick="toggle_message('{{number}}')">{{ message_headers.From }}</td>
	<td onclick="toggle_message('{{number}}')">{{ message_headers.Date }}</td>
	</tr>
	<tr id='message_{{number}}' class="message" style="background-color: #fdc;">
	<td "background-color: #fff;"></td>
	<td colspan='3' style="border: 1px dotted black; padding: 1em;">
		<p>{{ message }}</p>
	</td>
	</tr>
	<tr id='actions_{{number}}' class="message" style="background-color: #fdc;">
	<td "background-color: #fff;"></td>
	<td colspan='3' style="border-bottom: 1px dotted black; border-right: 1px dotted black; border-left: 1px dotted black;">
		<form action="/compose/reply/{{number}}" style="padding-left: 1em;">
			<input type="submit" value="Reply">
		</form>
		<form action="/compose/reply_all/{{number}}" style="padding-left: 1em;">
			<input type="submit" value="Reply All">
		</form>
		<form action="/compose/forward/{{number}}" style="padding-left: 1em;">
			<input type="submit" value="Forward">
		</form>
	</td>
	</tr>
	{% endfor %}
	<tr>
	<td colspan="4">	
	<form>
		<input type="submit" value="Delete Selected" onclick="delete_selected(); return false">
	</form>
	</td>
	</tr>
</table>
</div>
{% endblock %}

{% block javascript %}
function toggle_message(id)
{
	if ($("#message_"+id).is(':visible')) // if one is visible, hide all
	{
		$("#message_"+id).hide();
		$("#actions_"+id).hide();
	}
	else
	{
		$("#message_"+id).show();
		$("#actions_"+id).show();
	}
}

function delete_selected()
{
}
{% endblock %}

{% block jquery %}
	$('.message').each(
		function(){
			$(this).hide();
		}
	);
{% endblock %}
